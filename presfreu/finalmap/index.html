<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>EU French presidency - map</title>
    <link rel="stylesheet" href="./leaflet.css" />
    <script src="./leaflet.js"></script>

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        .leaflet-container {
            height: 600px;
            width: 800px;
            max-width: 100%;
            max-height: 100%;
        }
    </style>

</head>

<body>
    <div id="map" style="width: 800px; height: 600px;"></div>

    <script>

        //article data
        const lay1 = [
            { nom: "Mercy-le-Haut", lon: "5.82527", lat: "49.36854", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-4.aspx" },
            { nom: "Amiens", lon: "2.2956629", lat: "49.8940954", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-5.aspx" },
            { nom: "Rochefort", lon: "-0.961638", lat: "45.9366292", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-6.aspx" },
            { nom: "Wallers-Arenberg", lon: "3.3995879", lat: "50.3743281", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-8.aspx" },
            { nom: "Nérac", lon: "0.3400153", lat: "44.136059", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-9.aspx" },
            { nom: "Lille", lon: "3.0634357", lat: "50.6369747", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-10.aspx" },
            { nom: "Arcachon, Île aux Oiseaux", lon: "-1.1762875", lat: "44.6980628", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-11.aspx" },
            { nom: "Marseille", lon: "5.3827909", lat: "43.2964952", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-12.aspx" },
            { nom: "Nancy", lon: "6.1833113", lat: "48.6935204", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-13.aspx" },
            { nom: "Lunéville", lon: "6.4936858", lat: "48.594777", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-13.aspx" },
            { nom: "Cheverny", lon: "1.4580436", lat: "47.5002295", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-13.aspx" },
            { nom: "Cargèse", lon: "8.596765", lat: "42.1348622", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-14.aspx" },
            { nom: "Le Rheu", lon: "-1.7937466", lat: "48.1004685", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-14.aspx" },
            { nom: "Paris-Tour Eiffel", lon: "2.2945066", lat: "48.8582629", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-14.aspx " },
            { nom: "Saint-Véran", lon: "6.8680367", lat: "44.7003233", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-15.aspx" },
            { nom: "Paris-Centre", lon: "2.3394644", lat: "48.8577093", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-16.aspx" },
            { nom: "Paris-Palais de l’Elysée", lon: "2.3168682", lat: "48.8704799", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-17.aspx" },
            { nom: "Paris-Assemblée nationale", lon: "2.3187185", lat: "48.8621203", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-17.aspx" },
            { nom: "Paris-Sénat", lon: "2.3373483", lat: "48.8486698", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-17.aspx" },
            { nom: "Paray-le-Monial", lon: "4.1219125", lat: "46.4501814", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Luxeuil-les-Bains", lon: "6.3770203", lat: "47.8205833", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Toulouse", lon: "1.4433626", lat: "43.6043655", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Kourou", lon: "-52.6837043", lat: "5.1690963", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Octeville", lon: "-1.6439345", lat: "49.6245694", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Hérouville-Saint-Clair", lon: "-0.3332796", lat: "49.2036974", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Deauville-Trouville", lon: "0.0773596", lat: "49.3647273", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Sotteville-lès-Rouen", lon: "1.0888618", lat: "49.414093", url: "https://myintracomm.ec.europa.eu/dg/ESTAT/News/Pages/Virtual-celebration-of-the-French-Presidency-of-the-EU-20.aspx" },
            { nom: "Colmar", lon: "7.3538222", lat: "48.0768296", url: "" },
            { nom: "Pointe du Raz", lon: "-4.7317515", lat: "48.0387982", url: "" },
            { nom: "République du Saugeais", lon: "6.462789", lat: "46.9925916", url: "" },
            { nom: "Tours", lon: "0.6933974", lat: "47.3953966", url: "" },
            { nom: "Limoges", lon: "1.2600133", lat: "45.8268988", url: "" },
            { nom: "Le Puy-en-Velay", lon: "3.8851646", lat: "45.0472766", url: "" },
            { nom: "Saint-Jean-Pied-de-Port", lon: "-1.2383229", lat: "43.1625047", url: "" },
        ];

        //EU places data
        const lay2 = [
            { nom: "European Parliament", lon: "7.7686192", lat: "48.5974229", address: "Allée du Printemps, 67070 STRASBOURG", url: "https://www.europarl.europa.eu" },
            { nom: "European Ombudsman", lon: "7.7696583", lat: "48.5940953", address: "Allée Spach, 67000 STRASBOURG", url: "https://www.ombudsman.europa.eu/" },
            { nom: "European Banking Authority (EBA)", lon: "2.2450104", lat: "48.8916847", address: "Tour Europlaza, 20 Avenue André Prothin, 92400 PARIS LA DEFENSE", url: "https://www.eba.europa.eu/" },
            { nom: "European Securities and Markets Authority (ESMA)", lon: "2.3710761", lat: "48.8444507", address: "201-203 Rue de Bercy, 75012 PARIS", url: "https://www.esma.europa.eu" },
            { nom: "EU Agency for Railways (ERA)", lon: "3.5273269", lat: "50.365179", address: "120 Rue Marc Lefrancq, 59300 VALENCIENNES", url: "https://www.era.europa.eu/" },
            { nom: "EU Agency for Railways (ERA)", lon: "3.075383", lat: "50.6402824", address: "299 Boulevard de Leeds, 59777 LILLE", url: "https://www.era.europa.eu/" },
            { nom: "Community Plant Variety Office (CPVO)", lon: "-0.5478401", lat: "47.4692306", address: "3 Boulevard du Maréchal Foch, 49100 ANGERS", url: "https://cpvo.europa.eu/" },
            { nom: "EUISS", lon: "", lat: "", address: "100 Avenue de Suffren, 75 PARIS", url: "" },
            { nom: "Maison Jean Monnet", lon: "", lat: "", address: "7 Chemin du Vieux Pressoir, Houjarray, 78 BAZOCHES SUR GUYONNE", url: "" },
            { nom: "Maison Robert Schuman", lon: "", lat: "", address: "8-12 Rue Robert Schuman, 57 SCY-CHAZELLES", url: "" }
        ]

        //prepare icons. Default: iconSize: [25, 41] - iconAnchor: [12, 41] - shadowSize: [41, 41]
        const iconBlue = new L.Icon.Default({ iconUrl: 'marker_bl.png', iconSize: [15, 25], iconAnchor: [7, 25], shadowSize: [25, 25] });
        const iconOrange = new L.Icon.Default({ iconUrl: 'marker_or.png', iconSize: [15, 25], iconAnchor: [7, 25], shadowSize: [25, 25] });
        //const iconPurple = new L.Icon.Default({ iconUrl: 'marker_pu.png' });
        const iconGray = new L.Icon.Default({ iconUrl: 'marker_gr.png', iconSize: [15, 25], iconAnchor: [7, 25], shadowSize: [25, 25] });
        console.log(iconBlue)

        //make map
        var map = L.map('map').setView([46.797, 3.042], 6);

        //add background
        var tiles = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
                'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            tileSize: 512,
            zoomOffset: -1
        }).addTo(map);

        //layer 1
        for (m of lay1) {

            //get icon
            const icon = m.url ? iconOrange : iconGray

            //build popup message
            let html = '<b>' + m.nom + '</b><br />'
            if (m.url)
                html += '<a target="_blank" rel="noopener noreferrer" href="' + m.url + '">Read article</a>'
            else
                html += 'Article coming soon...'

            //add marker to map
            L.marker([m.lat, m.lon], { title: m.nom, icon: icon }).addTo(map).bindPopup(html);
        }



        //layer 2
        for (m of lay2) {

            //get icon
            const icon = m.url ? iconBlue : iconGray

            //build popup message
            let html = '<b>' + m.nom + '</b><br />'
            if (m.address)
                html += m.address + "<br />"
            if (m.url)
                html += '<a target="_blank" rel="noopener noreferrer" href="' + m.url + '">Website</a>'

            //add marker to map
            L.marker([m.lat, m.lon], { title: m.nom, icon: icon }).addTo(map).bindPopup(html);
        }






        /*
        COULEUR 2 : LIEUX DES COLLEGUES
            • Marseille (13) (caché par un autre pin)
            • Besançon (25)
            • Grenoble (38)
            • La Chapelle-des-Marais (44)
            • Mercy-le-Haut (54) (caché par un autre pin)
            • Metz (57)
            • Thionville (57)
            • Valenciennes (59)
            • Wasquehal (59)
            • Francières-Sucrerie (60)
            • Strasbourg (67)
            • Le Praz-de-Lys (74)
            • Paris (75) (caché par un autre pin)
            • Salernes (83)
            • Saint-Dié-des-Vosges (88)
            • Avallon (89)
        */

    </script>
</body>

</html>